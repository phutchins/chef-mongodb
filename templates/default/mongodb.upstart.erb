# Source: mongodb.upstart.erb
# This config file is auto-generated by chef
# please don't modify manually

limit nofile 20000 20000

kill timeout 300 # wait 300s between SIGTERM and SIGKILL.

pre-start script
    mkdir -p /var/lib/mongodb/
    mkdir -p /var/log/mongodb/
end script

start on runlevel [2345]
stop on runlevel [06]

script
  ENABLE_MONGODB="yes"
  if [ -f /etc/default/<%= @name %> ]; then . /etc/default/<%= @name %>; fi
  if [ "x$ENABLE_MONGODB" = "xyes" ]; then exec start-stop-daemon --make-pidfile --pidfile /var/run/<%= @name %>.pid --start --quiet --chuid <%= @user %> --exec <%= @daemon %> -- --config /etc/<%= @name %>.conf; fi
end script
